'use client';
import { motion } from 'framer-motion';
import { useEffect, useState } from 'react';
import Button from './Button';

const SecurityActions = () => {
    // State to track if the screen is mobile
    const [isMobile, setIsMobile] = useState(false);

    useEffect(() => {
        if (typeof window !== "undefined") {
            const checkIfMobile = () => {
                setIsMobile(window.innerWidth < 768);
            };
    
            checkIfMobile();
            window.addEventListener("resize", checkIfMobile);
    
            return () => window.removeEventListener("resize", checkIfMobile);
        }
    }, []);
    

    const boxVariants = {
        hidden: (direction) => {
            const positions = {
                topLeft: { x: -100, y: -100, opacity: 0 },
                topRight: { x: 100, y: -100, opacity: 0 },
                bottomLeft: { x: -100, y: 100, opacity: 0 },
                bottomRight: { x: 100, y: 100, opacity: 0 }
            };
            return positions[direction];
        },
        visible: {
            x: 0,
            y: 0,
            opacity: 1,
            transition: {
                type: 'spring',
                damping: 12,
                stiffness: 100,
                duration: 0.8
            }
        }
    };

    // Function to render a box with or without animation based on screen size
    const renderBox = (position, heading, text, icon, textAlign = "left") => {
        const content = (
            <>
                <h3 className={`text-secondary font-bold text-sm lg:text-xl mb-3 ${textAlign === "right" ? "text-right" : ""}`}>{heading}</h3>
                <p className={`text-gray-700 text-xs lg:text-base ${textAlign === "right" ? "text-right" : ""}`}>{text}</p>
                <div className={`absolute ${position === "topLeft" || position === "bottomLeft" ? "-right-8" : "-left-8"} ${position === "topLeft" || position === "topRight" ? "-bottom-8" : "-top-8"} bg-primary p-4 rounded-full`}>
                    {icon}
                </div>
            </>
        );

        if (isMobile) {
            // For mobile: render a regular div with no animation
            return (
                <div className="bg-gray-100 p-2 md:p-6 max-w-[350px] rounded-lg shadow-sm relative">
                    {content}
                </div>
            );
        } else {
            // For desktop: render with animation
            return (
                <motion.div
                    className="bg-gray-100 p-2 md:p-6 max-w-[350px] rounded-lg shadow-sm relative"
                    custom={position}
                    initial="hidden"
                    whileInView="visible"
                    viewport={{ once: true, margin: "-100px" }}
                    variants={boxVariants}
                >
                    {content}
                </motion.div>
            );
        }
    };

    return (
        <div className="w-full bg-white py-16 px-4 md:px-8">
            <div className="max-w-4xl mx-auto">
                <h1 className="text-center text-3xl md:text-4xl font-bold mb-16">
                    <span className="text-secondary">WHAT CAN YOU DO </span>
                    <span className="text-primary">IMMEDIATELY</span>
                    <span className="text-secondary">?</span>
                </h1>

                <div className="">
                    {/* Four Boxes Grid */}
                    <div className="grid grid-cols-2 md:grid-cols-2 gap-20 lg:gap-24 ">
                        {/* Top Left Box */}
                        {renderBox(
                            "topLeft",
                            "PRESERVE EVIDENCE",
                            "Do not modify or delete any suspicious files or messages",
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" viewBox="0 0 25 28" fill="none">
                                <path d="M12.0334 3.89704C14.3889 3.89704 16.6112 4.40259 18.7 5.4137C20.7889 6.42482 22.5334 7.88593 23.9334 9.79704C24.0889 9.99704 24.1389 10.1748 24.0834 10.3304C24.0278 10.4859 23.9334 10.6193 23.8 10.7304C23.6667 10.8415 23.5112 10.8915 23.3334 10.8804C23.1556 10.8693 23 10.7748 22.8667 10.597C21.6445 8.8637 20.0723 7.53593 18.15 6.6137C16.2278 5.69148 14.1889 5.23037 12.0334 5.23037C9.87782 5.23037 7.8556 5.69148 5.96671 6.6137C4.07782 7.53593 2.51115 8.8637 1.26671 10.597C1.13337 10.797 0.977817 10.9081 0.800039 10.9304C0.622261 10.9526 0.466706 10.9081 0.333372 10.797C0.177817 10.6859 0.0833724 10.547 0.0500391 10.3804C0.0167057 10.2137 0.0667057 10.0415 0.200039 9.8637C1.57782 7.97482 3.3056 6.50815 5.38337 5.4637C7.46115 4.41926 9.67782 3.89704 12.0334 3.89704ZM12.0334 7.03037C15.0334 7.03037 17.6112 8.03037 19.7667 10.0304C21.9223 12.0304 23 14.5081 23 17.4637C23 18.5748 22.6056 19.5026 21.8167 20.247C21.0278 20.9915 20.0667 21.3637 18.9334 21.3637C17.8 21.3637 16.8278 20.9915 16.0167 20.247C15.2056 19.5026 14.8 18.5748 14.8 17.4637C14.8 16.7304 14.5278 16.1137 13.9834 15.6137C13.4389 15.1137 12.7889 14.8637 12.0334 14.8637C11.2778 14.8637 10.6278 15.1137 10.0834 15.6137C9.53893 16.1137 9.26671 16.7304 9.26671 17.4637C9.26671 19.6193 9.90559 21.4193 11.1834 22.8637C12.4612 24.3082 14.1112 25.3193 16.1334 25.897C16.3334 25.9637 16.4667 26.0748 16.5334 26.2304C16.6 26.3859 16.6112 26.5526 16.5667 26.7304C16.5223 26.8859 16.4334 27.0193 16.3 27.1304C16.1667 27.2415 16 27.2748 15.8 27.2304C13.4889 26.6526 11.6 25.5026 10.1334 23.7804C8.66671 22.0582 7.93337 19.9526 7.93337 17.4637C7.93337 16.3526 8.33337 15.4193 9.13337 14.6637C9.93337 13.9082 10.9 13.5304 12.0334 13.5304C13.1667 13.5304 14.1334 13.9082 14.9334 14.6637C15.7334 15.4193 16.1334 16.3526 16.1334 17.4637C16.1334 18.197 16.4112 18.8137 16.9667 19.3137C17.5223 19.8137 18.1778 20.0637 18.9334 20.0637C19.6889 20.0637 20.3334 19.8137 20.8667 19.3137C21.4 18.8137 21.6667 18.197 21.6667 17.4637C21.6667 14.8859 20.7223 12.7193 18.8334 10.9637C16.9445 9.20815 14.6889 8.33037 12.0667 8.33037C9.44448 8.33037 7.18893 9.20815 5.30004 10.9637C3.41115 12.7193 2.46671 14.8748 2.46671 17.4304C2.46671 17.9637 2.51671 18.6304 2.61671 19.4304C2.71671 20.2304 2.9556 21.1637 3.33337 22.2304C3.40004 22.4304 3.39448 22.6082 3.31671 22.7637C3.23893 22.9193 3.11115 23.0304 2.93337 23.097C2.7556 23.1637 2.58337 23.1581 2.41671 23.0804C2.25004 23.0026 2.13337 22.8748 2.06671 22.697C1.73337 21.8304 1.49448 20.9693 1.35004 20.1137C1.20559 19.2581 1.13337 18.3748 1.13337 17.4637C1.13337 14.5081 2.20559 12.0304 4.35004 10.0304C6.49448 8.03037 9.0556 7.03037 12.0334 7.03037ZM12.0334 0.630371C13.4556 0.630371 14.8445 0.802593 16.2 1.14704C17.5556 1.49148 18.8667 1.98593 20.1334 2.63037C20.3334 2.74148 20.45 2.87482 20.4834 3.03037C20.5167 3.18593 20.5 3.34148 20.4334 3.49704C20.3667 3.65259 20.2556 3.77482 20.1 3.8637C19.9445 3.95259 19.7556 3.94148 19.5334 3.83037C18.3556 3.23037 17.1389 2.76926 15.8834 2.44704C14.6278 2.12482 13.3445 1.9637 12.0334 1.9637C10.7445 1.9637 9.47782 2.1137 8.23337 2.4137C6.98893 2.7137 5.80004 3.18593 4.66671 3.83037C4.48893 3.94148 4.31115 3.96926 4.13337 3.9137C3.9556 3.85815 3.82226 3.74148 3.73337 3.5637C3.64448 3.38593 3.62226 3.22482 3.66671 3.08037C3.71115 2.93593 3.82226 2.80815 4.00004 2.69704C5.24448 2.03037 6.54448 1.51926 7.90004 1.1637C9.2556 0.808149 10.6334 0.630371 12.0334 0.630371ZM12.0334 10.2637C14.1 10.2637 15.8778 10.9581 17.3667 12.347C18.8556 13.7359 19.6 15.4415 19.6 17.4637C19.6 17.6637 19.5389 17.8248 19.4167 17.947C19.2945 18.0693 19.1334 18.1304 18.9334 18.1304C18.7556 18.1304 18.6 18.0693 18.4667 17.947C18.3334 17.8248 18.2667 17.6637 18.2667 17.4637C18.2667 15.797 17.65 14.4026 16.4167 13.2804C15.1834 12.1581 13.7223 11.597 12.0334 11.597C10.3445 11.597 8.89448 12.1581 7.68337 13.2804C6.47226 14.4026 5.86671 15.797 5.86671 17.4637C5.86671 19.2637 6.17782 20.7915 6.80004 22.047C7.42226 23.3026 8.33337 24.5637 9.53337 25.8304C9.66671 25.9637 9.73337 26.1193 9.73337 26.297C9.73337 26.4748 9.66671 26.6304 9.53337 26.7637C9.40004 26.897 9.24448 26.9637 9.06671 26.9637C8.88893 26.9637 8.73337 26.897 8.60004 26.7637C7.28893 25.3859 6.28337 23.9804 5.58337 22.547C4.88337 21.1137 4.53337 19.4193 4.53337 17.4637C4.53337 15.4415 5.26671 13.7359 6.73337 12.347C8.20004 10.9581 9.96671 10.2637 12.0334 10.2637ZM12 16.797C12.2 16.797 12.3612 16.8637 12.4834 16.997C12.6056 17.1304 12.6667 17.2859 12.6667 17.4637C12.6667 19.1304 13.2667 20.497 14.4667 21.5637C15.6667 22.6304 17.0667 23.1637 18.6667 23.1637C18.8 23.1637 18.9889 23.1526 19.2334 23.1304C19.4778 23.1081 19.7334 23.0748 20 23.0304C20.2 22.9859 20.3723 23.0137 20.5167 23.1137C20.6612 23.2137 20.7556 23.3637 20.8 23.5637C20.8445 23.7415 20.8112 23.897 20.7 24.0304C20.5889 24.1637 20.4445 24.2526 20.2667 24.297C19.8667 24.4081 19.5167 24.4693 19.2167 24.4804C18.9167 24.4915 18.7334 24.497 18.6667 24.497C16.6889 24.497 14.9723 23.8304 13.5167 22.497C12.0612 21.1637 11.3334 19.4859 11.3334 17.4637C11.3334 17.2859 11.3945 17.1304 11.5167 16.997C11.6389 16.8637 11.8 16.797 12 16.797Z" fill="#F2F2F2" />
                            </svg>
                        )}

                        {/* Top Right Box */}
                        {renderBox(
                            "topRight",
                            "DOCUMENT EVERYTHING",
                            "Take screenshots and save timestamps of suspicious activity.",
                            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="28" viewBox="0 0 27 28" fill="none">
                                <path d="M18.6667 18.263C17.5556 18.263 16.6111 17.8741 15.8333 17.0964C15.0556 16.3186 14.6667 15.3741 14.6667 14.263C14.6667 13.1519 15.0556 12.2075 15.8333 11.4297C16.6111 10.6519 17.5556 10.263 18.6667 10.263C19.7778 10.263 20.7222 10.6519 21.5 11.4297C22.2778 12.2075 22.6667 13.1519 22.6667 14.263C22.6667 15.3741 22.2778 16.3186 21.5 17.0964C20.7222 17.8741 19.7778 18.263 18.6667 18.263ZM18.6667 15.5964C19.0444 15.5964 19.3611 15.4686 19.6167 15.213C19.8722 14.9575 20 14.6408 20 14.263C20 13.8852 19.8722 13.5686 19.6167 13.313C19.3611 13.0575 19.0444 12.9297 18.6667 12.9297C18.2889 12.9297 17.9722 13.0575 17.7167 13.313C17.4611 13.5686 17.3333 13.8852 17.3333 14.263C17.3333 14.6408 17.4611 14.9575 17.7167 15.213C17.9722 15.4686 18.2889 15.5964 18.6667 15.5964ZM10.6667 27.5964V23.7297C10.6667 23.263 10.7778 22.8241 11 22.413C11.2222 22.0019 11.5333 21.6741 11.9333 21.4297C12.6444 21.0075 13.3944 20.6575 14.1833 20.3797C14.9722 20.1019 15.7778 19.8964 16.6 19.763L18.6667 22.263L20.7333 19.763C21.5556 19.8964 22.3556 20.1019 23.1333 20.3797C23.9111 20.6575 24.6556 21.0075 25.3667 21.4297C25.7667 21.6741 26.0833 22.0019 26.3167 22.413C26.55 22.8241 26.6667 23.263 26.6667 23.7297V27.5964H10.6667ZM13.3 24.9297H17.4L15.6 22.7297C15.2 22.8408 14.8111 22.9852 14.4333 23.163C14.0556 23.3408 13.6778 23.5297 13.3 23.7297V24.9297ZM19.9333 24.9297H24V23.7297C23.6444 23.5075 23.2778 23.313 22.9 23.1464C22.5222 22.9797 22.1333 22.8408 21.7333 22.7297L19.9333 24.9297ZM2.66667 24.9297C1.93333 24.9297 1.30556 24.6686 0.783333 24.1464C0.261111 23.6241 0 22.9964 0 22.263V3.59635C0 2.86302 0.261111 2.23524 0.783333 1.71302C1.30556 1.1908 1.93333 0.929688 2.66667 0.929688H21.3333C22.0667 0.929688 22.6944 1.1908 23.2167 1.71302C23.7389 2.23524 24 2.86302 24 3.59635V10.263C23.6444 9.81858 23.2556 9.39635 22.8333 8.99635C22.4111 8.59635 21.9111 8.32969 21.3333 8.19635V3.59635H2.66667V22.263H8.2C8.13333 22.5075 8.08333 22.7519 8.05 22.9964C8.01667 23.2408 8 23.4852 8 23.7297V24.9297H2.66667ZM5.33333 8.92969H14.6667C15.2444 8.48524 15.8778 8.15191 16.5667 7.92969C17.2556 7.70746 17.9556 7.59635 18.6667 7.59635V6.26302H5.33333V8.92969ZM5.33333 14.263H12C12 13.7964 12.05 13.3408 12.15 12.8964C12.25 12.4519 12.3889 12.0186 12.5667 11.5964H5.33333V14.263ZM5.33333 19.5964H9.93333C10.1778 19.3964 10.4389 19.2186 10.7167 19.063C10.9944 18.9075 11.2778 18.763 11.5667 18.6297V16.9297H5.33333V19.5964ZM2.66667 22.263V3.59635V8.16302V7.59635V22.263Z" fill="#F2F2F2" />
                            </svg>,
                            "right"
                        )}

                        {/* Bottom Left Box */}
                        {renderBox(
                            "bottomLeft",
                            "AVOID USING THE COMPROMISED DEVICE",
                            "Do not modify or delete any suspicious files or messages",
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="29" viewBox="0 0 30 29" fill="none">
                                <path d="M4.23359 2.16331L6.66693 4.59665H5.33359V19.2633H17.6003L0.933594 2.59665L2.80026 0.72998L29.2003 27.13L27.3336 28.9966L20.2669 21.93H18.6669V24.5966H21.3336V27.2633H10.6669V24.5966H13.3336V21.93H5.33359C4.60026 21.93 3.97248 21.6689 3.45026 21.1466C2.92804 20.6244 2.66693 19.9966 2.66693 19.2633V4.59665C2.66693 3.77443 2.92804 3.16331 3.45026 2.76331L4.23359 2.16331ZM27.6003 21.73L25.1336 19.2633H26.6669V4.59665H10.4669L7.80026 1.92998H26.6669C27.4003 1.92998 28.028 2.19109 28.5503 2.71331C29.0725 3.23554 29.3336 3.86331 29.3336 4.59665V19.2633C29.3336 19.8411 29.1725 20.3522 28.8503 20.7966C28.528 21.2411 28.1114 21.5522 27.6003 21.73Z" fill="#F2F2F2" />
                            </svg>
                        )}

                        {/* Bottom Right Box */}
                        {renderBox(
                            "bottomRight",
                            "CONTACT A FORENSIC EXPERT",
                            "Early intervention can make or break a case.",
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="26" viewBox="0 0 30 26" fill="none">
                                <path d="M3.53307 25.1305L0.466406 22.1305C0.19974 21.8638 0.0664062 21.5527 0.0664062 21.1972C0.0664062 20.8416 0.19974 20.5305 0.466406 20.2638C2.42196 18.1527 4.67752 16.5694 7.23307 15.5138C9.78863 14.4583 12.3775 13.9305 14.9997 13.9305C17.622 13.9305 20.2053 14.4583 22.7497 15.5138C25.2942 16.5694 27.5553 18.1527 29.5331 20.2638C29.7997 20.5305 29.9331 20.8416 29.9331 21.1972C29.9331 21.5527 29.7997 21.8638 29.5331 22.1305L26.4664 25.1305C26.222 25.3749 25.9386 25.5083 25.6164 25.5305C25.2942 25.5527 24.9997 25.4638 24.7331 25.2638L20.8664 22.3305C20.6886 22.1972 20.5553 22.0416 20.4664 21.8638C20.3775 21.6861 20.3331 21.4861 20.3331 21.2638V17.4638C19.4886 17.1972 18.622 16.9861 17.7331 16.8305C16.8442 16.6749 15.9331 16.5972 14.9997 16.5972C14.0664 16.5972 13.1553 16.6749 12.2664 16.8305C11.3775 16.9861 10.5109 17.1972 9.66641 17.4638V21.2638C9.66641 21.4861 9.62196 21.6861 9.53307 21.8638C9.44418 22.0416 9.31085 22.1972 9.13307 22.3305L5.26641 25.2638C4.99974 25.4638 4.70529 25.5527 4.38307 25.5305C4.06085 25.5083 3.77752 25.3749 3.53307 25.1305ZM6.99974 18.3972C6.3553 18.7305 5.73307 19.1138 5.13307 19.5472C4.53307 19.9805 3.91085 20.4638 3.26641 20.9972L4.59974 22.3305L6.99974 20.4638V18.3972ZM22.9997 18.4638V20.4638L25.3997 22.3305L26.7331 21.0638C26.0886 20.4861 25.4664 19.9861 24.8664 19.5638C24.2664 19.1416 23.6442 18.7749 22.9997 18.4638ZM13.6664 7.26383V0.597168H16.3331V7.26383H13.6664ZM22.4664 11.0638L20.5997 9.1305L25.3331 4.39717L27.1997 6.3305L22.4664 11.0638ZM7.53307 11.0638L2.79974 6.3305L4.66641 4.39717L9.39974 9.1305L7.53307 11.0638Z" fill="#F2F2F2" />
                            </svg>,
                            "right"
                        )}
                    </div>
                </div>

                {/* Support Button */}
                <motion.div
                    className="mt-12 text-center flex items-center justify-center"
                    initial={{ y: 50, opacity: 0 }}
                    whileInView={{ y: 0, opacity: 1 }}
                    viewport={{ once: true }}
                    transition={{ delay: 0.6, duration: 0.5 }}
                >
                    <Button
                        className="py-3 px-4"
                    >
                        GET HELP NOW â€“ 24/7 SUPPORT
                    </Button>
                </motion.div>
            </div>
        </div>
    );
};

export default SecurityActions;